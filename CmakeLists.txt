cmake_minimum_required(VERSION 3.30)

# c++ 17 is required
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Set project name
project(GameEngine)

# Get dependencies
set(FETCHCONTENT_BASE_DIR ${CMAKE_BINARY_DIR}/_deps CACHE PATH "Dependencies download dir")
include(FetchContent)
set(FETCHCONTENT_QUIET OFF)

# VK-Boostrap
include(FetchContent)
FetchContent_Declare(
    vk_bootstrap
    GIT_REPOSITORY https://github.com/charles-lunarg/vk-bootstrap
    GIT_TAG v1.3.290
    GIT_SHALLOW TRUE
)

FetchContent_MakeAvailable(vk_bootstrap)
FetchContent_GetProperties(vk_bootstrap)
if(NOT vk_bootstrap_POPULATED)
    FetchContent_Populate(vk_bootstrap)
    add_subdirectory(${vk_bootstrap_SOURCE_DIR} ${vk_bootstrap_BINARY_DIR} EXCLUDE_FROM_ALL)
endif()

file(GLOB SOURCES
    Main.cpp
    ${vk_bootstrap_SOURCE_DIR}/*.cpp
)

add_executable(${PROJECT_NAME} Main.cpp)

#target_include_directories(${PROJECT_NAME} PRIVATE
#    ${vk_bootstrap_SOURCE_DIR}/src
#)

#if(MSVC)
  target_link_libraries(${PROJECT_NAME} PRIVATE vk-bootstrap)
#else()
  # Clang and GCC may need libstd++ and libmath
 # target_link_libraries(${PROJECT_NAME} PRIVATE vk-bootstrap::vk-bootstrap stdc++ m)
#endif()
